{% extends 'shopuser_base.html' %}
{% load static %}
{% block content %}
<main class="container my-4" id="cartList">
	{% if request.user.user_type == '1' or  request.user.user_type == '2' %}
	<h3 class="my-4 border-bottom pb-1"> Sales report (Percentage)
		<span class="float-right">
			Shop User Id : {{shopuser.id}}
		</span>
	</h3>
        
	<br><br>
    <h5 class="my-4 pb-1">Brand wise</h5>
    <br>
    <table class="table table-bordered">
		<thead>
			<tr>
				<th>Brand</th>
                <th>Total Products</th>
				<th>Products sold</th>
                <th>Percentage sales</th>
			</tr>
		</thead>
		<tbody>
            {% for p in prod_sale_brand %}
			<tr>
				<td>
					
					<p>{{p.brand}}</p>
				</td>

                <td>
		            {{p.total}}
				</td>
                 
				<td>
		            {{p.sold}}
				</td>
                <td>
                    {% widthratio p.sold p.total 100 %} %
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table><br>

    <br><br>
    <h5 class="my-4 pb-1">Catogory wise</h5>
    <br>
    <table class="table table-bordered">
		<thead>
			<tr>
				<th>Category</th>
                <th>Total Products</th>
				<th>Products sold</th>
                <th>Percentage sales</th>
			</tr>
		</thead>
		<tbody>
            {% for p in prod_sale_cat %}
			<tr>
				<td>
					
					<p>{{p.category}}</p>
				</td>

                <td>
		            {{p.total}}
				</td>
                 
				<td>
		            {{p.sold}}
				</td>
                <td>
                    {% widthratio p.sold p.total 100 %} %
				</td>
			</tr>
			{% endfor %}
		</tbody>
	</table><br>
	{% else %}
    <p> You are not authorized to see this page. Please login as shopuser.</p>
    {% endif %}

</main>
{% endblock %}

{% block extra_body %}
   <!-- Empty toast to show the message -->
	<div class="toast-container position-fixed top-0 end-0 p-3">
		<div id="toast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
		<div class="d-flex">
			<div id="toast-body" class="toast-body"></div>
			<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
		</div>
		</div>
	</div>
{% endblock %}
